# Use RTT logging for debugging (Seeeduino XIAO BLE doesn't support USB logging)
# CONFIG_ZMK_USB_LOGGING=n  # Not supported on XIAO BLE

# Enable RTT logging instead
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_LOG=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_MODE_IMMEDIATE=y

# Debug logging levels
CONFIG_ZMK_LOG_LEVEL_DBG=y
CONFIG_LOG_PROCESS_THREAD_STARTUP_DELAY_MS=2000

# Bluetooth debug logging
CONFIG_BT_LOG_LEVEL_DBG=y
# CONFIG_BT_CTLR_LOG_LEVEL_DBG=y  # Not available on this board

# Enable USB HID
CONFIG_ZMK_USB=y

# CRITICAL: Disable NFC to use pins D4/D5 as GPIOs (required for Totem matrix)
CONFIG_NFCT_PINS_AS_GPIOS=y

# Enable mouse support
CONFIG_ZMK_MOUSE=y

# Enable pointing device support
CONFIG_ZMK_POINTING=y

# Enable Bluetooth
CONFIG_BT=y
CONFIG_ZMK_BLE=y

# Set keyboard name
CONFIG_ZMK_KEYBOARD_NAME="Totem"

# Increase Bluetooth transmit power (optional, helps with range)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Split keyboard BLE settings
CONFIG_ZMK_SPLIT=y
CONFIG_ZMK_SPLIT_BLE=y

# Force central role on left side (helps with connection stability)
CONFIG_ZMK_SPLIT_ROLE_CENTRAL=y

# Bluetooth connection intervals for better stability
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=30
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Power management settings
CONFIG_BT_CTLR_TX_PWR_DYNAMIC_CONTROL=n

CONFIG_ZMK_COMBO_MAX_COMBOS_PER_KEY=50
CONFIG_ZMK_IDLE_TIMEOUT=30000
CONFIG_ZMK_SLEEP=n

CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5

# Enable battery reporting over BLE
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_BATTERY_REPORT_INTERVAL=60
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=1
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5